# 実装計画

## 開発フェーズ

### Phase 1: 環境構築とセットアップ（1-2日）

#### タスク
- [ ] Supabase プロジェクトの作成
- [ ] データベーステーブルの作成（SQL実行）
- [ ] Supabase クライアントのセットアップ
- [ ] 環境変数の設定（`.env.local`）
- [ ] 必要なパッケージのインストール
  - `@supabase/supabase-js`
  - `@supabase/ssr`
  - `react-markdown`
  - `@uiw/react-md-editor`
  - `rehype-highlight`
  - `remark-gfm`
  - その他UIライブラリ（オプション: shadcn/ui）

#### 成果物
- Supabase プロジェクト
- データベーススキーマ
- 基本的なプロジェクト構造

---

### Phase 2: 認証機能の実装（1日）

#### タスク
- [ ] Supabase Auth の設定
- [ ] ログインページの作成（`/login`）
- [ ] 認証ヘルパー関数の実装
- [ ] ミドルウェアでの認証チェック
- [ ] ログアウト機能

#### 成果物
- ログイン/ログアウト機能
- 管理画面へのアクセス制御

---

### Phase 3: プロフィール機能の実装（2-3日）

#### タスク
- [ ] プロフィールデータの取得（Server Actions）
- [ ] トップページのレイアウト作成
- [ ] HeroSection コンポーネント
- [ ] AboutSection コンポーネント
- [ ] SkillsSection コンポーネント（タブ切り替え）
- [ ] ExperienceTimeline コンポーネント
- [ ] レスポンシブ対応
- [ ] スムーススクロール実装

#### 成果物
- プロフィールページ（トップページ）

---

### Phase 4: ブログ一覧・詳細機能（2-3日）

#### タスク
- [ ] 記事一覧取得（Server Actions）
- [ ] ブログ一覧ページ（`/blog`）
  - [ ] PostCard コンポーネント
  - [ ] TagFilter コンポーネント
  - [ ] 検索機能（オプション）
  - [ ] ページネーションまたは無限スクロール
- [ ] ブログ詳細ページ（`/blog/[slug]`）
  - [ ] マークダウンレンダリング
  - [ ] シンタックスハイライト
  - [ ] 目次の自動生成（オプション）
- [ ] タグ別記事一覧（`/blog/tag/[tag]`）

#### 成果物
- ブログ記事の閲覧機能（公開側）

---

### Phase 5: マークダウンエディタの実装（2-3日）★重要

#### タスク
- [ ] マークダウンエディタライブラリの選定と導入
  - 推奨: `@uiw/react-md-editor` (リアルタイムプレビュー内蔵)
- [ ] エディタコンポーネントの作成
  - [ ] 左右分割レイアウト
  - [ ] リアルタイムプレビュー機能
  - [ ] マークダウンツールバー
- [ ] レスポンシブ対応（モバイル: タブ切り替え）
- [ ] エディタのスタイル調整
- [ ] 画像アップロード機能（Supabase Storage）

#### 成果物
- マークダウンエディタコンポーネント
- リアルタイムプレビュー機能

---

### Phase 6: 記事管理機能（CRUDの実装）（3-4日）

#### タスク
- [ ] Server Actions の実装
  - [ ] `createPost` - 記事作成
  - [ ] `updatePost` - 記事更新
  - [ ] `deletePost` - 記事削除
  - [ ] `publishPost` - 記事公開/非公開
- [ ] 管理画面のレイアウト
  - [ ] AdminSidebar コンポーネント
  - [ ] AdminHeader コンポーネント
- [ ] ダッシュボード（`/admin/dashboard`）
  - [ ] 統計情報カード
  - [ ] 最近の投稿一覧
- [ ] 記事一覧管理（`/admin/posts`）
  - [ ] PostsTable コンポーネント
  - [ ] 削除機能（確認ダイアログ）
  - [ ] 公開/非公開切り替え
- [ ] 新規記事投稿（`/admin/posts/new`）
  - [ ] PostForm コンポーネント
  - [ ] マークダウンエディタ統合
  - [ ] 自動保存（下書き）
  - [ ] スラッグ自動生成
- [ ] 記事編集（`/admin/posts/[id]/edit`）

#### 成果物
- 記事管理機能（CRUD）
- 管理画面

---

### Phase 7: プロフィール編集機能（1-2日）

#### タスク
- [ ] プロフィール編集ページ（`/admin/profile`）
- [ ] プロフィール更新（Server Actions）
- [ ] アバター画像アップロード（Supabase Storage）
- [ ] スキル管理UI
- [ ] 経歴管理UI

#### 成果物
- プロフィール編集機能

---

### Phase 8: タグ機能の実装（1日）

#### タスク
- [ ] タグの取得・作成（Server Actions）
- [ ] 記事投稿時のタグ入力
- [ ] タグ別記事一覧ページ
- [ ] タグフィルター機能

#### 成果物
- タグ機能

---

### Phase 9: UI/UX改善とスタイリング（2-3日）

#### タスク
- [ ] デザインシステムの統一
  - [ ] カラースキームの適用
  - [ ] フォントの設定
  - [ ] スペーシングの統一
- [ ] アニメーション追加
  - [ ] ページ遷移
  - [ ] スクロールアニメーション
  - [ ] ホバーエフェクト
- [ ] ローディング状態の実装
- [ ] エラーハンドリングの改善
- [ ] トースト通知の実装

#### 成果物
- 洗練されたUI/UX

---

### Phase 10: SEO対策とパフォーマンス最適化（1-2日）

#### タスク
- [ ] メタタグの設定（Next.js Metadata API）
- [ ] OGP画像の設定
- [ ] サイトマップ生成
- [ ] robots.txt 作成
- [ ] 画像の最適化（Next.js Image）
- [ ] ISRの設定
- [ ] パフォーマンス測定（Lighthouse）

#### 成果物
- SEO最適化
- パフォーマンス向上

---

### Phase 11: テストとデバッグ（1-2日）

#### タスク
- [ ] 各機能のテスト
- [ ] レスポンシブ対応の確認
- [ ] ブラウザ互換性チェック
- [ ] エラーケースの確認
- [ ] セキュリティチェック（RLSポリシー）

#### 成果物
- バグ修正済みのアプリケーション

---

### Phase 12: デプロイと本番環境設定（1日）

#### タスク
- [ ] Vercel へのデプロイ
- [ ] 環境変数の設定（本番環境）
- [ ] カスタムドメインの設定（オプション）
- [ ] SSL証明書の確認
- [ ] アナリティクスの設定（オプション）

#### 成果物
- 本番環境で稼働するサイト

---

## 開発期間の目安

**合計: 18-28日（約3-4週間）**

- フルタイムで開発する場合: 3-4週間
- パートタイムで開発する場合: 6-8週間

---

## 技術的な注意点

### Supabase関連
- **Row Level Security (RLS)** を必ず設定する
- API キーは環境変数で管理（`.env.local`、Gitにコミットしない）
- クライアントとサーバーで適切なSupabaseクライアントを使い分ける
  - クライアント: `createClientComponentClient()`
  - サーバー: `createServerComponentClient()` または `createServerActionClient()`

### Next.js App Router
- Server Components と Client Components を適切に使い分ける
- `'use client'` ディレクティブが必要なケース:
  - イベントハンドラ（onClick, onChange など）
  - React Hooks（useState, useEffect など）
  - ブラウザAPI使用時
- Server Actions は `'use server'` で宣言

### マークダウンエディタ
- `@uiw/react-md-editor` を推奨
  - リアルタイムプレビュー内蔵
  - ツールバー付き
  - カスタマイズ可能
- シンタックスハイライトには `rehype-highlight` を使用

### パフォーマンス
- 画像は `next/image` を使用
- 動的インポートでコード分割
- ISR (Incremental Static Regeneration) でブログ記事をキャッシュ

---

## 開発の優先順位

### 優先度: 高
1. Phase 1: 環境構築
2. Phase 2: 認証機能
3. Phase 3: プロフィール機能
4. Phase 4: ブログ閲覧機能
5. Phase 5: マークダウンエディタ
6. Phase 6: 記事管理機能

### 優先度: 中
7. Phase 7: プロフィール編集
8. Phase 8: タグ機能
9. Phase 10: SEO対策

### 優先度: 低（後回し可能）
10. Phase 9: UI/UX改善（段階的に実施）
11. Phase 11: テスト（並行して実施）
12. Phase 12: デプロイ（最後）

---

## 次のステップ

1. **Phase 1を開始**: Supabase プロジェクトの作成とセットアップ
2. **プロフィールコンテンツの記入**: `03_profile_content.md` を編集
3. **デザインの確認**: カラースキーム、フォントを決定

準備ができたら、実装を開始しましょう！🚀
